# Title: Install Community Site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Description: This option creates the Community Site template and the Community Site for Scoring Communities demo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Configuring the AEM Communities Publish Tunnel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/system/console/configMgr/com.adobe.cq.social.user.impl.transport.HttpToPublisher,apply,TRUE,action,ajaxConfigManager,$location,,enable,TRUE,enable,FALSE,agent.configuration,/etc/replication/agents.author/publish,disabled.cipher.suites,,enabled.cipher.suites,,propertylist,"enable,agent.configuration,disabled.cipher.suites,enabled.cipher.suites",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Making room for the future Community Site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingDelete,/content/sites/scoring,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# The following lines are creating the Community Site Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteTemplate,/content.social.json,templateName,Reference Scoring Site,description,Reference Site Template for Demos that contains the scoring features,enabled,on,functions,"{""functions"":[{""function"":""/etc/community/templates/functions/reference/qna"",""title"":""Questions"",""url"":""questions"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":false},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[]}]}]} ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# The following lines are creating new Community Sites,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Site,/content.social.json,name,Scoring,jcr:description,Reference Scoring site,dns,communities.geometrixx.com,urlName,scoring,blueprint,/etc/community/templates/sites/custom/reference_scoringsite ,theme,/etc/designs/community/sitethemes/bootstrap-lumen/clientlibs ,allowUserRegistration,TRUE,allowAnonymousAccess,TRUE,allowPrivateMessaging,TRUE,allowFacebook,TRUE,fbconnectoauthid,/etc/cloudservices/facebookconnect/geometrixx-outdoorsfacebookapp/jcr:content ,allowTwitter,TRUE,twitterconnectoauthid,/etc/cloudservices/twitterconnect/geometrixx-outdoors-twitter-app/jcr:content ,moderators,/social/authors/aaron.mcdonald@mailinator.com,moderateContent,FALSE,tagNameSpaces,/etc/tags/geometrixx-outdoors ,groupEnablementManagers,/social/authors/jason.werner@dodgit.com ,groupAdmin,/social/authors/aaron.mcdonald@mailinator.com,createGroupPermission,COMMUNITY_GROUP_ADMINISTRATORS ,baseLanguage,en,allowMachineTranslation,TRUE,availableLanguages,en,availableLanguages,fr,availableLanguages,de,availableLanguages,es,persistTranslation,TRUE,translatePageOrSection,TRANSLATE_SELECTION,pagethumbnail,target.png,macOrgId,5584D36B545258440A4C98A7@AdobeOrg,enableAnalytics,TRUE,analyticsCloudConfigPath,/etc/cloudservices/sitecatalyst/demomachine/demomachine
# Updating a few components with new settings,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/sites/scoring/en/jcr:content/content/primary/qna.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Updating the forum scoring rule to include the QNA post also,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/etc/community/scoring/rules/sub-rules/member-forum-create/jcr:content,topics@String[],com/adobe/cq/social/forum|com/adobe/cq/social/qna,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Activate,/etc/community/scoring/rules/sub-rules/member-forum-create,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Assigning the scoring and badging rules to the site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/sites/scoring/jcr:content,scoringRules@String[],/etc/community/scoring/rules/forums-scoring|/etc/community/scoring/rules/adv-forums-scoring,badgingRules@String[],/etc/community/badging/rules/forums-badging|/etc/community/badging/rules/adv-forums-badging,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Assigning a few role-based badges,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Badge,/home/users/geometrixx-outdoors/aaron.mcdonald%40mailinator.com/profile.social.json,badgeContentPath,/etc/community/badging/images/moderator/jcr:content/moderator.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Republishing the site,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SitePublish,/content/sites/scoring/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,